services:
  - type: web
    name: n8n-automation
    env: docker
    plan: free
    dockerfilePath: ./Dockerfile
    healthCheckPath: /
    envVars:
      # n8n will automatically use Render's PostgreSQL database if available
      - key: N8N_BASIC_AUTH_ACTIVE
        value: true
      - key: N8N_BASIC_AUTH_USER
        sync: false  # Set this in Render dashboard as a secret
      - key: N8N_BASIC_AUTH_PASSWORD
        sync: false  # Set this in Render dashboard as a secret
      - key: N8N_HOST
        value: 0.0.0.0
      - key: N8N_PORT
        value: 5678
      - key: N8N_PROTOCOL
        value: https
      - key: WEBHOOK_URL
        generateValue: true  # Will be generated automatically
      # Optional: Add encryption key for credentials
      # - key: N8N_ENCRYPTION_KEY
      #   sync: false  # Set this in Render dashboard as a secret

# Optional: Uncomment to add a PostgreSQL database
# databases:
#   - name: n8n-db
#     plan: free
#     databaseName: n8n
#     user: n8n

